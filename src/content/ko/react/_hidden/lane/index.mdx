---
title: What are Lanes in React source code?
order: 100
category: hook
isHidden: true
---

import Lane from "./components/Lane";

ë¦¬ì•¡íŠ¸ 19ì—ì„œëŠ” ë‹¬ë¼ì§„ ê²ƒ ê°™ë‹¤. 18ë¡œ ë³´ì.

## getHighestPriorityLane

```js
export function getHighestPriorityLane(lanes: Lanes): Lane {
  return lanes & -lanes;
}
```

?????

```js
export type Lanes = number;
```

ì¼ë‹¨ LanesëŠ” ìˆ«ìë‹¤.

## bits & -bits

`bits & -bits`ëŠ” ê°€ì¥ ë‚®ì€ ìë¦¬ ë¹„íŠ¸ë¥¼ ì°¾ëŠ”ë‹¤. ì™œ?

https://stackoverflow.com/a/16155417/30126918 ë¥¼ ì°¸ê³ í•˜ë©´ JSì—ì„œ ì´ì§„ìˆ˜ëŠ” ì•„ë˜ì™€ ê°™ì´ ì¶œë ¥í•  ìˆ˜ ìˆë‹¤.

```js
console.log(Number.toString(5)); // 101
console.log(Number.toString(-5)); // -101 ğŸ‘

console.log((5 >>> 0).toString(2)); // 101
console.log((-5 >>> 0).toString(2)); // 11111111111111111111111111111011 ğŸ‘
```

> you can use the unsigned right shift bitwise operator (>>>) to coerce your number to an unsigned integer.

2ì˜ ë³´ìˆ˜ë²•ì—ì„œ ìŒìˆ˜ëŠ” ë¹„íŠ¸ ë°˜ì „ í›„ 1ì„ ë”í•´ì„œ êµ¬í•  ìˆ˜ ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

ë”°ë¼ì„œ `bits & -bits`ëŠ” ê°€ì¥ ë‚®ì€ ë¹„íŠ¸ë¥¼ ì°¾ëŠ”ë‹¤.

```js
console.log((12 >>> 0).toString(2)); // 1100
console.log((-12 >>> 0).toString(2)); // 11111111111111111111111111110100
console.log((12 & -12).toString(2)); // 100

console.log((48 >>> 0).toString(2)); // 110000
console.log((-48 >>> 0).toString(2)); // 11111111111111111111111111010000
console.log((48 & -48).toString(2)); // 10000
```

**lanesëŠ” lane ë¹„íŠ¸ì˜ ì§‘í•©ì´ê³ , ë‚®ì€ ë¹„íŠ¸ì¼ìˆ˜ë¡ ìš°ì„ ìˆœìœ„ê°€ ë†’ë‹¤.** ë³µìˆ˜í˜• sê°€ ìˆëƒ ì—†ëƒë¥¼ ì‹ ê²½ì¨ì•¼í• ë“¯.

## priorityì˜ ì¢…ë¥˜

We have 3 priority systems

- Scheduler priority - used to prioritize tasks in scheduler
- Event priority - to mark priority of user event.
- Lane priority - to mark priority of work. 

ì§€í”¼í‹°ì—ê²Œ ë¬¼ì–´ë´¤ë‹¤.

1.	Lane Priority. React Fiber ì „ìš©ì˜ ë¹„íŠ¸ë§ˆìŠ¤í¬ ê¸°ë°˜ ìš°ì„ ìˆœìœ„. ì˜ˆ: SyncLane, InputContinuousLane, DefaultLaneâ€¦
2.	Event Priority. ë¸Œë¼ìš°ì € ì´ë²¤íŠ¸ ë ˆë²¨ì—ì„œì˜ ì¶”ìƒ ìš°ì„ ìˆœìœ„. ì˜ˆ: DiscreteEventPriority(í´ë¦­, í‚¤ë³´ë“œ), ContinuousEventPriority(ë§ˆìš°ìŠ¤ë¬´ë¸Œ), DefaultEventPriority(ë Œë”)â€¦
3.	Scheduler Priority. React ìŠ¤ì¼€ì¤„ëŸ¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì“°ëŠ” ìˆ«ì ê¸°ë°˜ ìš°ì„ ìˆœìœ„. ì˜ˆ: ImmediatePriority, UserBlockingPriority, NormalPriorityâ€¦

> FiberëŠ” ìê¸° laneì„ ë³´ê³  â€œì´ê²Œ SyncLaneì´ë„¤â€ë¼ê³  ì•Œì§€ë§Œ, ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” â€œSyncLaneì´ ë­”ë°? ìˆ«ìë¡œ ì¤˜.â€œë¼ê³  ë§í•©ë‹ˆë‹¤.



## Demo 

1 -> 10 -> 11 ì¸ì¤„ ì•Œì•˜ë‹¤...

<Lane client:idle/>

```tsx
import { Button } from "@/components/ui/button";
import { startTransition, useRef, useState } from "react";

export default function Lane() {
  const [num, setNum] = useState(1);
  const log = useRef<string[]>([]);
  log.current.push(`rendering ${num}`);

  return (
    <div>
      <Button
        onClick={() => {
          // ë‚®ì€ ìš°ì„ ìˆœìœ„(transition)ë¡œ ì‹¤í–‰ â€” ì‚¬ìš©ì ì…ë ¥ì„ ë¸”ë¡œí‚¹í•˜ì§€ ì•ŠìŒ
          startTransition(() => {
            setNum((n) => {
              log.current.push(`ğŸ¢ transition ${n} -> ${n + 1}`);
              return n + 1;
            });
          });

          // ë³´í†µ/ì¦‰ì‹œì„± ë†’ì€ ì—…ë°ì´íŠ¸
          setNum((n) => {
            log.current.push(`ğŸ‡ normal ${n} -> ${n * 10}`);
            return n * 10;
          });
        }}
      >
        click me ({num})
      </Button>
      <div>
        {log.current.map((item, index) => (
          <div key={index}>{item}</div>
        ))}
      </div>
    </div>
  );
}

```

setStateê°€ ëª‡ ë²ˆ í˜¸ì¶œë ì§€ í•¨ë¶€ë¡œ ì˜ˆì¸¡í•˜ì§€ ë§ì. (íŠ¹íˆ useTransitionê³¼ ê°™ì€ concurrent renderê°€ ì´ë£¨ì–´ì§ˆë•Œ.)