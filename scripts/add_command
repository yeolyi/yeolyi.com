#!/bin/bash

APP_ID=...
GUILD_ID=...
BOT_TOKEN=...

curl -X PUT "https://discord.com/api/v10/applications/$APP_ID/guilds/$GUILD_ID/commands" \
  -H "Authorization: Bot $BOT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '[
    {
      "name": "study",
      "description": "Study bot commands",
      "type": 1,
      "dm_permission": false,
      "options": [
        {
          "type": 1,
          "name": "log",
          "description": "해당 주차(스레드)에 체크인 링크를 기록",
          "options": [
            { "type": 3, "name": "link", "description": "디스코드 메시지 링크", "required": true }
          ]
        },
        {
          "type": 1,
          "name": "stats",
          "description": "유저 통계 보기",
          "options": [
            { "type": 6, "name": "user", "description": "대상 유저(생략 시 나)" }
          ]
        },
        { "type": 1, "name": "dashboard", "description": "통합 대시보드" },
        {
          "type": 2,
          "name": "forum",
          "description": "스터디 포럼 관리",
          "options": [
            { "type": 1, "name": "register", "description": "현재 포럼 채널 등록" },
            { "type": 1, "name": "list", "description": "등록된 포럼 목록" }
          ]
        }
      ]
    }
  ]'